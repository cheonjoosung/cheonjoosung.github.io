I"ë*<p><code class="highlighter-rouge">Angular Module ì¤‘ Routing &amp; Lazy ëª¨ë“ˆ ì‚¬ìš©ì— ê´€í•œ í¬ìŠ¤íŒ…ì…ë‹ˆë‹¤.</code> Lazy ê°œë…ì€ Angular Application ì˜ íš¨ìœ¨ì„ ë†’ì—¬ì£¼ëŠ” ì¤‘ìš”í•œ íŠ¹ì„±? íŠ¹ì§•? ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ëª¨ë“  ê±¸ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•„ìš”í•œ ì‹œì ì— ë¶ˆëŸ¬ì˜¤ëŠ” ê°œë…!!! ì¸ê²ƒ ê°™ê¸´í•œë°â€¦ ì €ë„ í™•ì‹ ì´ ì—†ì–´ì„œ ê°™ì´ ë°°ì›Œë´ìš”</p>

<p><br /><b>1) <code class="highlighter-rouge">Routing &amp; Lazy ëª¨ë“ˆ ì‚¬ìš©í•˜ê¸°</code></b><br /></p>
<p>=) Routing ì€ íŠ¹ì • í˜ì´ì§€(URL)ë¡œ ì „í™˜? ì´ë™? ex) ìƒë‹¨ ë©”ë‰´ë¥¼ í´ë¦­ì‹œ í•´ë‹¹ ë©”ë‰´ì— ê´€í•œ í˜ì´ì§€ë¥¼ ë¶€ë¥¼ ë•Œ ì‚¬ìš©</p>
<p>=) ë¨¼ì € 2ê°œì˜ ì»´í¬ë„ŒíŠ¸(í˜ì´ì§€)ë¥¼ ë¶€ë¥´ê¸° ìœ„í•´ì„œ 2ê°œì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë´…ì‹œë‹¤. 'ng g component component_name'ë¥¼ í†µí•´ 2ê°œë¥¼ ìƒì„±</p>
<p>=) 2ê°œì˜ í˜ì´ì§€ë¥¼ ë¶€ë¥¼ ìˆ˜ ìˆë„ë¡ routing.ts íŒŒì¼ì„ ìƒì„±í•´ë³¼ê»˜ìš”.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">import</span> <span class="p">{</span> <span class="no">ModuleWithProviders</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="n">import</span> <span class="p">{</span> <span class="no">Routes</span><span class="p">,</span> <span class="no">RouterModule</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>

<span class="n">import</span> <span class="p">{</span> <span class="no">EagerComponent</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'./eager.component'</span><span class="p">;</span>

<span class="n">const</span> <span class="ss">routes: </span><span class="no">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="ss">path: </span><span class="s1">''</span><span class="p">,</span> <span class="ss">redirectTo: </span><span class="s1">'eager'</span><span class="p">,</span> <span class="ss">pathMatch: </span><span class="s1">'full'</span> <span class="p">},</span>
  <span class="p">{</span> <span class="ss">path: </span><span class="s1">'eager'</span><span class="p">,</span> <span class="ss">component: </span><span class="no">EagerComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="ss">path: </span><span class="s1">'lazy'</span><span class="p">,</span> <span class="ss">loadChildren: </span><span class="s1">'./lazy/lazy.module#LazyModule'</span> <span class="p">}</span>
<span class="p">];</span>

<span class="n">export</span> <span class="n">const</span> <span class="ss">routing: </span><span class="no">ModuleWithProviders</span> <span class="o">=</span> <span class="no">RouterModule</span><span class="p">.</span><span class="nf">forRoot</span><span class="p">(</span><span class="n">routes</span><span class="p">);</span></code></pre></figure>

<p>=) ë¼ìš°í„° íŒ¨í‚¤ì§€ì—ì„œ ë¼ìš°í„° ëª¨ë“ˆì„ ì¶”ê°€í•´ì¤¬ê³  í˜¸ì¶œí•  ì»´í¬ë„ŒíŠ¸ EagerComponent ê°€ ì„í¬íŠ¸ ì‹œì¼°êµ¬ìš”</p>
<p>=) path: 'ê²½ë¡œ', redirectTo: 'ë””í´íŠ¸ í˜ì´ì§€', pathMatch: 'ë§¤ì¹­ ì •ë„'. ê·¸ë¦¬ê³  ì²«ë²ˆì§¸ëŠ” eager, lazy ë¥¼ í´ë¦­í•˜ë©´ ê·¸ ë•Œ LazyModule ì„ ë¶ˆëŸ¬ì„œ lazy component ë¥¼ í˜¸ì¶œì‹œí‚¤ê² ë‹¤ëŠ” ì˜ë¯¸ì—ìš”. </p>
<p>=) ë§ˆì§€ë§‰ ì¤„ì„ ìœ„ì˜ ì„ ì–¸í•œ ë³€ìˆ˜ë¥¼ ë°”íƒ•ìœ¼ë¡œ routing Service ë¥¼ ì œê³µí•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì—ìš”.</p>
<p>=) {path : 'list/:id, ....'} ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ url : list/id ë¥¼ ì‚¬ìš©í•˜ë©° idê°’ì„ ì „ë‹¬ ê°€ëŠ¥</p>
<p>=) {path : '**', NotFoundComponent} ìœ¼ë¡œ ì‚¬ìš©í•´ì„œ ë§¤ì¹­ë˜ì§€ ì•Šì„ ë•Œì˜ í˜ì´ì§€ë¡œ ì´ë™ì‹œì¼œë„ ëœë‹¤</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">import</span> <span class="p">{</span> <span class="no">BrowserModule</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'@angular/platform-browser'</span><span class="p">;</span>
<span class="n">import</span> <span class="p">{</span> <span class="no">NgModule</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="n">import</span> <span class="p">{</span> <span class="no">AppComponent</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'./app.component'</span><span class="p">;</span>

<span class="n">import</span> <span class="p">{</span> <span class="no">HelloService</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'./hello.service'</span><span class="p">;</span>
<span class="n">import</span> <span class="p">{</span> <span class="no">EagerComponent</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'./eager/eager.component'</span><span class="p">;</span>

<span class="n">import</span> <span class="p">{</span> <span class="n">routing</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'./eager/routing'</span><span class="p">;</span>

<span class="vi">@NgModule</span><span class="p">({</span>
  <span class="ss">declarations: </span><span class="p">[</span>
    <span class="no">AppComponent</span><span class="p">,</span>
    <span class="no">EagerComponent</span>
  <span class="p">],</span>
  <span class="ss">imports: </span><span class="p">[</span>
    <span class="no">BrowserModule</span><span class="p">,</span>
    <span class="n">routing</span>
  <span class="p">],</span>
  <span class="ss">providers: </span><span class="p">[</span><span class="no">HelloService</span><span class="p">],</span>
  <span class="ss">bootstrap: </span><span class="p">[</span><span class="no">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppModule</span> <span class="p">{</span> <span class="p">}</span></code></pre></figure>

<p>=) ë£¨íŠ¸ ëª¨ë“ˆë¡œ ì™€ì„œ ì„ ì–¸ëœ ë¼ìš°íŒ… ëª¨ë“ˆì„ imports ì— ì¶”ê°€í•´ì•¼ ë˜ìš”.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="n">nav</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">routerLink</span><span class="o">=</span><span class="s2">"eager"</span><span class="o">&gt;</span><span class="no">Eager</span><span class="o">&lt;</span><span class="sr">/a&gt;
&lt;a routerLink="lazy"&gt;Lazy&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/nav&gt;
&lt;router-outlet&gt;&lt;/</span><span class="n">router</span><span class="o">-</span><span class="n">outlet</span><span class="o">&gt;</span></code></pre></figure>

<p>=) ê·¸ë¦¬ê³  Angular Application ì˜ ì‹œì‘ì ì¸ app.component.html ì— ìœ„ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</p>
<p>=) í´ë¦­ì„ í•˜ë©´ routerLink ì˜ ì´ë²¤íŠ¸ëŠ” eager or lazy ê°€ ë˜ê³  ë°œìƒëœ ì´ë²¤íŠ¸ë¥¼ routing service ê°€ ìºì¹˜ë¥¼ í•©ë‹ˆë‹¤. ê·¸ í›„ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ <routerLink-outlet>&lt;/router-outlet&gt; íƒœê·¸ ì•ˆì— ê²°ê³¼ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. eager ë¥¼ í´ë¦­í•  ë•ŒëŠ” ë‚˜ì˜¤ì§€ë§Œ lazy ëŠ” êµ¬í˜„ì„ ì¶”ê°€ì ìœ¼ë¡œ í•´ì•¼í•©ë‹ˆë‹¤.&lt;/p&gt;


<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">import</span> <span class="p">{</span> <span class="no">NgModule</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="n">import</span> <span class="p">{</span> <span class="no">LazyComponent</span> <span class="p">}</span>   <span class="n">from</span> <span class="s1">'./lazy.component'</span><span class="p">;</span>
<span class="n">import</span> <span class="p">{</span> <span class="n">routing</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'./lazy.routing'</span><span class="p">;</span>

<span class="vi">@NgModule</span><span class="p">({</span>
  <span class="ss">imports: </span><span class="p">[</span><span class="n">routing</span><span class="p">],</span>
  <span class="ss">declarations: </span><span class="p">[</span><span class="no">LazyComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">LazyModule</span> <span class="p">{</span>
<span class="p">}</span></code></pre></figure>

<p>=) ë¨¼ì € ìœ„ì˜ routing.ts ì—ì„œ path: 'lazy', loadChildren: './lazy/lazy.module#LazyModule' lazy ë¥¼ í´ë¦­í•˜ë©´ LazyModule ë¥¼ ë¶€ë¥´ê²Œ ë©ë‹ˆë‹¤. ì´ ë•Œ lazyrouting ë¥¼ ì„¸íŒ…í•˜ë©´ì„œ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶€ë¥¼ ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.</p>


<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">import</span> <span class="p">{</span> <span class="no">ModuleWithProviders</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="n">import</span> <span class="p">{</span> <span class="no">Routes</span><span class="p">,</span> <span class="no">RouterModule</span> <span class="p">}</span> <span class="n">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="n">import</span> <span class="p">{</span> <span class="no">LazyComponent</span> <span class="p">}</span>   <span class="n">from</span> <span class="s1">'./lazy.component'</span><span class="p">;</span>

<span class="n">const</span> <span class="ss">routes: </span><span class="no">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="ss">path: </span><span class="s1">''</span><span class="p">,</span> <span class="ss">component: </span><span class="no">LazyComponent</span> <span class="p">}</span>
<span class="p">];</span>

<span class="n">export</span> <span class="n">const</span> <span class="ss">routing: </span><span class="no">ModuleWithProviders</span> <span class="o">=</span> <span class="no">RouterModule</span><span class="p">.</span><span class="nf">forChild</span><span class="p">(</span><span class="n">routes</span><span class="p">);</span></code></pre></figure>

<p>=) ì½”ë“œëŠ” routing.ts ì™€ ë¹„ìŠ·í•˜ë‚˜ RouterModule.forChild(routes) ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¡°ê¸ˆ ë‹¤ë¦…ë‹ˆë‹¤. forchild() ë©”ì„œë“œëŠ” RouterModule ì˜ ë©”ì„œë“œë¡œ ì •ì  ë©”ì„œë“œ(static)ì´ë‹¤. ëª¨ë“ˆëª…ì„ í†µí•´ ê³§ë°”ë¡œ ë©”ì„œë“œ ì ‘ê·¼ ê°€ëŠ¥ </p>
<p>=) í•´ë‹¹ ì½”ë“œê¹Œì§€ ì‘ì„±í•˜ë©´ lazy ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶€ë¥¼ ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.</p>

<p>Lazy ê°œë…ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” Angular ê°€ ëª¨ë“  ëª¨ë“ˆì„ êµ¬ë™ ì‹œì— ë¶€ë¥´ë©´ ëŠë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì²« í™”ë©´ì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ë¶€ë¥´ê³  íŠ¹ì • í˜ì´ì§€ì— ë“¤ì–´ê°”ì„ ë•Œ í•´ë‹¹ ëª¨ë“ˆì„ ë¶€ë¥´ê²Œ ëœë‹¤ë©´ ì†ë„ë„ ë¹¨ë¦¬ê³  ì•±ì˜ ì•ˆì •ì„±ë„ ë†’ì•„ì§ˆ ê²ƒì…ë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ì´ ë¶€ë¶„ì— ëŒ€í•œ ê³ ë ¤ê°€ ë§ì´ í•„ìš”í•´ì§ˆ ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤.</p>
</routerLink-outlet></p>
:ET